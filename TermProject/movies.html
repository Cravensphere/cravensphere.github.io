<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Search</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.2.1/mustache.min.js"></script>
</head>
<body>
    <header>
        <h1>Movie Search</h1>
    </header>
    <main>
        <div class="search-container">
            <input type="text" id="search-query" placeholder="Enter movie title or director">
            <button id="search-button">Search</button>
            <button id="toggle-layout">Toggle Layout</button>
        </div>
        <div id="results" class="grid-container"></div>
        <div id="pagination"></div>
        <div id="movie-details"></div>
        <h2>My Movie Collection</h2>
        <div id="collection" class="grid-container"></div>
    </main>
    <script>
        $(document).ready(function() {
            var startIndex = 0;
            var maxResults = 10;
            var totalResults = 0;
            var currentPage = 1;
            var isGridLayout = true;
            var currentResults = [];

            function fetchMovies(query, startIndex) {
                $.ajax({
                    url: `https://api.example.com/movies?api_key=56e665fbc9c321fad4cfb7957c12244b&query=${query}&startIndex=${startIndex}&maxResults=${maxResults}`,
                    method: 'GET',
                    success: function(data) {
                        totalResults = data.totalResults;
                        currentResults = data.results;
                        renderResults();
                    },
                    error: function(error) {
                        console.error('Error fetching movies:', error);
                    }
                });
            }

            function renderResults() {
                var template = $('#movie-template').html();
                var rendered = Mustache.render(template, { movies: currentResults });
                $('#results').html(rendered);
            }

            $('#search-button').click(function() {
                var query = $('#search-query').val();
                fetchMovies(query, startIndex);
            });

            $('#toggle-layout').click(function() {
                isGridLayout = !isGridLayout;
                $('#results').toggleClass('grid-container list-container');
            });
        });
    </script>
    <script id="movie-template" type="x-tmpl-mustache">
        {{#movies}}
        <div class="movie">
            <h3>{{title}}</h3>
            <p>{{director}}</p>
            <p>{{releaseDate}}</p>
        </div>
        {{/movies}}
    </script>
</body>
</html>